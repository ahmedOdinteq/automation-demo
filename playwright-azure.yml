trigger:
- main

pool:
  vmImage: ubuntu-latest

steps:
- task: NodeTool@0
  inputs:
    versionSpec: '14.x'
  displayName: 'Install Node.js'

- script: |
    npm install
    npx playwright install --with-deps
  displayName: 'npm install'
  workingDirectory: 'ts/playwright'

# need to orun xvbf for playwright automation
- script: |
    xvfb-run --auto-servernum --server-args="-screen 0 1280x960x24" -- npm run test.sanity
  displayName: 'Framework Sanity Tests'
  workingDirectory: 'ts/playwright'